import sys
import unittest
from textwrap import dedent

from hamcrest import assert_that, is_

X = 1
Y = 0

DOWN = (1, 0)
UP = (-1, 0)
RIGHT = (0, 1)
LEFT = (0, -1)
TURNS = {
    DOWN: [LEFT, RIGHT],
    UP: [LEFT, RIGHT],
    LEFT: [DOWN, UP],
    RIGHT: [DOWN, UP],
}


def compute(data):
    return "".join(e for e in crawl(data.split("\n")) if e not in "-|+")


def compute2(data):
    return len(list(crawl(data.split("\n"))))


def crawl(grid):
    position = [0, grid[0].index('|')]
    direction = DOWN

    while True:
        try:
            char = grid[position[Y]][position[X]]
        except IndexError:
            return

        if char == " ":
            return

        yield char

        if char == "+":
            direction = find_new_direction(grid, position, direction)

        position[X] += direction[X]
        position[Y] += direction[Y]


def find_new_direction(grid, position, actual_direction):
    for direction in TURNS[actual_direction]:
        try:
            potential = grid[position[Y] + direction[Y]][position[X] + direction[X]]
        except IndexError:
            continue

        if potential != " ":
            return direction


class DayTest(unittest.TestCase):
    def test_example(self):
        input = dedent("""\
             |          
             |  +--+    
             A  |  C    
         F---|----E|--+ 
             |  |  |  D 
             +B-+  +--+ """)
        assert_that(compute(input), is_('ABCDEF'))


class Day2Test(unittest.TestCase):
    def test_example(self):
        input = dedent("""\
             |          
             |  +--+    
             A  |  C    
         F---|----E|--+ 
             |  |  |  D 
             +B-+  +--+ """)
        assert_that(compute2(input), is_(38))


class FindNewDirectionTest(unittest.TestCase):
    def test_simple(self):
        grid = [
            " | ",
            " +-",
            "   ",
        ]
        assert_that(find_new_direction(grid, (1, 1), DOWN), is_(RIGHT))

    def test_boundaries(self):
        grid = [
            " |",
            "-+",
        ]
        assert_that(find_new_direction(grid, (1, 1), DOWN), is_(LEFT))


puzzle_input = """\
                                                                                                       |                                                                                                 
   +-+   +-+                                 +-+                   +---+       +-+   +-----------------|-----------------------------------+                                             +---+   +-+ +-+ 
   | |   | |                                 | |                   |   |       | |   |                 |                                   |                                             |   |   | | | | 
   | +---+ +---------------------+           | |                   +-----------|-+   |                 |                                   |           +-------------------------------------|---|-+ | | 
   |                             |           | |                       |       |     |                 |                                   |           |                                 |   |   |   | | 
   |                       +-------------------------------------+ Y-+ | +-----|-----+                 |                                   |           |   +-----------------------------|---|---|-+ | | 
   |                       |     |           | |                 |   | | |     |                       |                                   |           |   |                             |   |   | | | | 
   +-----------------------|-----|-----------+ +-------------------+ +-+ |     +-----+         +-------------------------------------------|-----------|---|-----------------------------|---------|---+ 
                           |     |                               | |     |           |         |       |                                   |           |   |                             |   |   | | |   
                           |     |                               | |     |           |         |       |   +---------------------------------+         |   |                             |   +---+ | |   
                           |     |                               | |     |           |         |       |   |                               | |         |   |                             |         | |   
                           |     |               +-----------------|-----|-----------|---------------------+                               | |         |   |           +-----------------|---+     | |   
                           |     |               |               | |     |           |         |       |                                   | |         |   |           |                 |   |     | |   
   +-------------+     +---|-----|-------------------------------|-|-----------------|-------+ |       |                                   +---------------|-----------|---------------------|-------|-+ 
   |             |     |   |     |               |               | |     |           |       | |       |                                     |         |   |           |                 |   |     | | | 
 +-|-------------|-------+ |     |     +-----+   +---------------|---------------+   +-----+ | |     +---------------------------------------|-------------------+     |     +-----------|-+ |     | | | 
 | |             |     | | |     |     |     |                   | |     |       |         | | |     | |                                     |         |   |     |     |     |           | | |     | | | 
 | |             |     | | |     |     |     |                   | |     |       |         | +---------|-------------------------------------|-------------|-----------|-+   +-----------+ | |     | | | 
 | |             |     | | |     |     |     |                   | |     |       |         |   |     | |                                     |         |   |     |     | |                 | |     | | | 
 | |             |     | | |     |     |     |                   | |     |   +---|-------------|---------------------------------------------|---------|---|-----|-------|---------------+ | |     | | | 
 | |             |     | | |     |     |     |                   | |     |   |   |         |   |     | |                                     |         |   |     |     | |               | | |     | | | 
 | |     +---+   |     | | |     |     |     |                   | |     |   |   |         |   |     | +-------------------------------------|---------|---|-----------|-----------------|-|-|---------+ 
 | |     |   |   |     | | |     |     |     |                   | |     |   |   |         |   |     |                                       |         |   |     |     | |               | | |     | |   
 | |     |   |   |     | | |     |   +---------------------------|---------------------------+ |     |                                       |         |   |     |     | |   +-+         | | |     | |   
 | |     |   |   |     | | |     |   | |     |                   | |     |   |   |         | | |     |                                       |         |   |     |     | |   | |         | | |     | |   
 | |     |   |   |     | | |     |   | |     |               +-----|---------|---|---------|-+ |     |                                       |         |   |     |     | |   | |         | | |   +---+   
 | |     |   |   |     | | |     |   | |     |               |   | |     |   |   |         |   |     |                                       |         |   |     |     | |   | |         | | |   | |     
 | |     |   |   |     | | |     | +---------------+     +-------+ |     |   |   |         |   |     |   +---------------------------------------+     |   |     |     | |   | |         | | +-+ | |     
 | |     |   |   |     | | |     | | | |     |     |     |   |     |     |   |   O         |   |     |   |                                   |   |     |   |     |     | |   | |         | |   | | |     
 | |     |   | +-------|-|-|-----|-+ | |     |     |     |   |     |     |   |   |         |   |     |   |                                   | +---------+ |     |     | |   | |         | |   | | |     
 | |     |   | | |     | | |     |   | |     |     |     |   |     |     |   |   |         |   |     |   |                                   | | |     | | |     |     | |   | |         | |   | | |     
 | |     |   | | |     | | +---------|-------|-----|---------|-----------|-------|---------|---|-----|---------------+                       | | |     | | |     |     | +---------+     | |   | | |     
 | |     |   | | |     | |       |   | |     |     |     |   |     |     |   |   |         |   |     |   |           |                       | | |     | | |     |     |     | |   |     | |   | | |     
 +-+     |   | | |     | |       | +-|-------------+     |   | +---|-----|---------------------|---------------------+                     +---|-------|-|-|-----|-----|-----|-|---|-----|-------+ |     
         |   | | |     | |       | | | |     |           |   | |   |     |   |   |         |   |     |   |                                 | | | |     | | |     |     |     | |   |     | |   |   |     
         |   | | |     | |       | | | |     |           |   | |   |     |   |   |         +---|---------|-----------------------------------+ | |     | | |     |     |     | |   |     | |   |   |     
         |   | | |     | |       | | | |     |           |   | |   |     |   |   |             |     |   |                                 |   | |     | | |     |     |     | |   |     | |   |   |     
         | +-----|-----|-------------|-|-------+         |   | |   |     |   |   |             |     |   |                                 | +-|-+     | | +-----|-----+   +-------------|-|-------+     
         | | | | |     | |       | | | |     | |         |   | |   |     |   |   |             |     |   |                                 | | |       | |       |         | | |   |     | |   |         
         | | | | |     | |       | | | |     | |         |   | |   |     |   |   |             |     |   |                                 | | |       | |       |         | | |   |     | |   | +-----+ 
         | | | | |     | |       | | | |     | |         |   | |   |     |   |   |             |     |   |                                 | | |       | |       |         | | |   |     | |   | |     | 
   +-----|---|-|-------|-----------|-|-------|-|-------------|-|---|-----|---|-----------------|---------|---------------+                 | +-|-------|-|-------------------|-|---------------|-+     | 
   |     | | | | |     | |       | | | |     | |         |   | |   |     |   |   |             |     |   |               |                 |   |       | |       |         | | |   |     | |   |       | 
   |     | | | | |     | |       | | | |     | |         |   | |   |     |   |   |             |     |   |               +---------------------|-+     | |       |         | | |   |     +-|-----------+ 
   |     | | | | |     | |       | | | |     | |         |   | |   |     |   |   |             |     |   |                                 |   | |     | |       |         | | |   |       |   |         
   |     | | | | |     | | +---------|-|-----|-+         |   | |   |     |   |   |             |     |   |                                 |   | |     | |       |         | | |   |     +---------+     
   |     | | | | |     | | |     | | | |     |           |   | |   |     |   |   |             |     |   |                                 |   | |     | |       |         | | |   |     | |   |   |     
   |     +---|-----------|-----+ | | | |     |           |   | |   |     |   |   |             |   +-|---|-------------+                   |   | | +-------+     |         | | |   |     | |   |   |     
   |       | | | |     | | |   | | | | |     |           |   | |   |     |   |   |             |   | |   |             |                   |   | | |   | | |     |         | | |   |     | |   |   |     
 +-----------|---|---------|---|-------|-----|-----------------|---|-------------|-------------|---------+       +-----|-------------------|-------------|------C|---+     | | | +-|-----|-+   |   |     
 | |       | | | |     | | |   | | | | |     |           |   | |   |     |   |   |             |   | |           |     |                   |   | | |   | | |     |   |     | | | | |     |     |   |     
 | | +-+ +-----|---------|-|---|-|-----+     |           |   | |   |     |   |   |             |   | |           |     |                   |   | | |   | | |     |   |     | | | | |     |   +-|---|---+ 
 | | | | | | | | |     | | |   | | | |       |           |   | |   |     |   |   |             |   | |           |     |                   |   | | |   | | |     |   |     | | | | |     |   | |   |   | 
 | | | | | | | | | +-------|-----|---------+ |           |   | +---|-------------------------------|-|-------+   |     |                   |   | | |   | | |     |   |     | | | | |     |   | |   |   | 
 | | | | | | | | | |   | | |   | | | |     | |           |   |     |     |   |   |             |   | |       |   |     |                   |   | | |   | | |     |   |     | | | | |     |   | |   |   | 
 | | | | | | | | | |   | | |   | | | |     +-|-----------|---|-----|-----|-------|-------+     |   | |       |   |     |               +-----+ | | |   | | |     |   |     | | | | |     |   | |   |   | 
 | | | | | | | | | |   | | |   | | | |       |           |   |     |     |   |   |       |     |   | |       |   |     |               |   | | | | |   | | |     |   |     | | | | |     |   | |   |   | 
 | | | | | | +-|-|-----|-|-|---------|-------------------|---|-----|-----|-------|-------------|-------------|-------------------------|---|---|---------|-|-+   |   |     | | | | |     |   | |   |   | 
 | | | | | |   | | |   | | |   | | | |       |           |   |     |     |   |   |       |     |   | |       |   |     |               |   | | | | |   | | | |   |   |     | | | | |     |   | |   |   | 
 | | | | | |   | | +-+ | | |   | | | |     +-|---------------|-----|---------|---------------------|-|-----------|-------------------------|-|-|---|---|-|-|-|---|-+ |   +-|-+ | | |     |   | |   |   | 
 | | | | | |   | |   | | | |   | | | |     | |           |   |     |     |   |   |       |     |   | |       |   |     |               |   | | | | |   | | | |   | | |   | |   | | |     |   | |   |   | 
 | | | +-+ |   | |   | | | |   | | | |     | |           |   |     |     |   |   |       |     |   | |       |   |     |               |   | | | | |   | | | |   | | |   | |   | | |     |   | |   |   | 
 | | |     |   | |   | | | |   | | | |     | |           |   |     |     |   |   |       |     |   | |       |   |     |               |   | | | | |   | | | |   | | |   | |   | | |     |   | |   |   | 
 | | |   +-|-+ | |   | | | |   | +-|-|---+ | |           |   | +---|-----|---|---|-+     |     |   | |       |   |     |               |   | | | | |   | | | |   | | |   | |   | | |     |   | |   |   | 
 | | |   | | | | |   | | | |   |   | |   | | |           |   | |   |     |   |   | |     |     |   | |       |   |     |               |   | | | | |   | | | |   | | |   | |   | | |     |   | |   |   | 
 | +-----+ | +-------|-|-|-----|---|-|-----------------------------|-----|---|-------------------------------|---|-----|---------------|---|---|---|---|-+ | |   | | |   | |   | | |     |   | |   |   | 
 |   |     |   | |   | | | |   |   | |   | | |           |   | |   |     |   |   | |     |     |   | |       |   |     |               |   | | | | |   |   | |   | | |   G |   | | |     |   | |   |   | 
 +-+ |     |   | | +---------------|-|---|-|-|-----------|---|---------------|-----|---------------|---------|---------|---------------|-------|---|---|-----|---|-|-|---|---+ | +-------|-+ | |   |   | 
   | |     |   | | | | | | |   |   | |   | | |           |   | |   |     |   |   | |     |     |   | |       |   |     |               |   | | | | |   |   | |   | | |   | | | |   |     | | | |   |   | 
 +-|-----+ |   | | | | | | |   |   | |   | | |           |   | +-------------+   +-------------|---|---+     |   |     |               |   | | | | |   |   | |   | | +-----|-------|-------|-------|---+ 
 | | |   | |   | | | | | | |   |   | |   | | |           |   |     |     |         |     |     |   | | |     |   |     |               |   | | | | |   |   | |   | |     | | | |   |     | | | |   |     
 | | | +-|-----|-----|---------|---|-------|-----------------------|-------------------------------|---------|---|-----|---------------|---|---|-----------------|---------|-|-----|-------------+ |     
 | | | | | |   | | | | | | |   |   | |   | | |           |   |     |     |         |     |     |   | | |     |   |     |               |   | | | | |   |   | |   | |     | | | |   |     | | | | | |     
 | | | | | +-----|-|-|-|-------|-----|-------|-----------|-----------+   |         |     |     |   | | |     |   |     |               |   | | | | |   |   | |   | |     | | | |   |     | | | | | |     
 | | | | |     | | | | | | |   |   | |   | | |           |   |     | |   |         |     |     |   | | |     |   |     |               |   | | | | |   |   | |   | |     | | | |   |     | | | | | |     
 | | | | |     | | | | | | |   |   | |   | | |           |   |     | |   |         |     |     |   | | |     |   |     |               |   | | | | |   |   | |   | |     | | | |   |     | | | | | |     
 | | | | |     | | | | | | |   |   | |   | | |           |   |     | |   |         |     |     |   | | |     |   |     |               |   | | | | |   |   | |   | |     | | | |   |     | | | | | |     
 | | | | |     | | | | | | |   |   | | +-|---|-----------------+ +-------|---------+     |     |   | | |     |   |     |           +-------+ | | | |   |   | |   | |     | | | |   |     | | | | | |     
 | | | | |     | | | | | | |   |   | | | | | |           |   | | | | |   |               |     |   | | |     |   |     |           |   |     | | | |   |   | |   | |     | | | |   |     | | | | | |     
 | | | | +---------|---+ | |   |   | | | | | |           |   | | | | |   |               |     |   | | |     |   |     |           |   |     | | | |   |   | |   | |     | | | |   |     | | | | | |     
 | | | |       | | | |   | |   |   | | | | | |           |   | | | | |   |               |     |   | | |     |   |     |           |   |     | | | |   |   | |   | |     | | | |   |     | | | | | |     
 | | | |       | | | |   | |   |   | | | +-|-------------|-----------+   |               |     |   | | |   +-|---------------------------------|-|-----|---|-|---|-------|-|-|-|---|---------|---------+ 
 | | | |       | | | |   | |   |   | | |   | |           |   | | | |     |               |     |   | | |   | |   |     |           |   |     | | | |   |   | |   | |     | | | |   |     | | | | | |   | 
 | | +---------|---|-|---|-+ +-------|-|-----------------|-----|---------|---------------|-+   |   | | |   | |   |     |           |   |     | | | |   |   | |   | |     | | | |   |     | | | | | |   | 
 | |   |       | | | |   |   | |   | | |   | |           |   | | | |     |               | |   |   | | |   | |   |     |           |   |     | | | |   |   | |   | |     | | | |   |     | | | | | |   | 
 | +---|-----------|---+ | +-|-|---|-|-----|-------------|---|-|---------------------------|-------|-|---------------------------------|-----|---------+   | |   | |     | | | |   |     | | | +-------+ 
 |     |       | | | | | | | | |   | | |   | |           |   | | | |     |               | |   |   | | |   | |   |     |           |   |     | | | |       | |   | |     | | | |   |     | | |   | |     
 |   +-+       | | | | | | | | | +-|---|-----|-----------|-----|---|---+ |               | |   |   | | |   | |   |     |           |   |     | | | |       | |   | |     | | | |   |     | | |   | +---+ 
 |   |         | | | | | | | | | | | | |   | |           |   | | | |   | |               | |   |   | | |   | |   |     |           |   |     | | | |       | |   | |     | | | |   |     | | |   |     | 
 |   |         | | | | | | | | | | | | |   | |           |   | | | |   | |   +----K------|-------------------|---------------+     |   |     | | | |       | |   | |     | | | |   |     | | |   |     | 
 |   |         | | | | | | | | | | | | |   | |           |   | | | |   | |   |           | |   |   | | |   | |   |     |     |     |   |     | | | |       | |   | |     | | | |   |     | | |   |     | 
 |   |         | | | | | | | | | | | | |   | |           |   | | | | +-|-|---------------|-----------|-|-----|---------------------------------|-------------|-----------+ | | |   |     | | |   | +-+ | 
 |   |         | | | | | | | | | | | | |   | |           |   | | | | | | |   |           | |   |   | | |   | |   |     |     |     |   |     | | | |       | |   | |       | | |   |     | | |   | | | | 
 |   |         | | | | +---|---|---|---|---|-|-+         |   | | | | | | |   |           | |   |   | | |   | |   |     |     |     |   |     | | | |       | |   | | +-+   | | |   |     | | |   | | | | 
 |   |         | | | |   | | | | | | | |   | | |         |   | | | | | | |   |           | |   |   | | |   | |   |     |     |     |   |     | | | |       | |   | | | |   | | |   |     | | |   | | | | 
 |   |     +---|---------|---|---------|---|-------------|-------------------|-----+     | |   |   | | |   | |   |     |     |     |   |     | | | |       | |   | | | |   | | |   |     | | |   | | | | 
 |   |     |   | | | |   | | | | | | | |   | | |         |   | | | | | | |   |     |     | |   |   | | |   | |   |     |     |     |   |     | | | |       | |   | | | |   | | |   |     | | |   | | | L 
 |   |     |   | | | |   | | | | | | | |   | | |         |   | | | | +---|---|-----------|-----|---|-------|-|---|-----|-----|---------|-----|-----|-------|-|---|---|-|-----------|---+ | | | +-|-|-+ | 
 |   |     |   | | | |   | | | | | | | |   | | |         |   | | | |   | |   |     |     | |   |   | | |   | |   |     |     |     |   |     | | | |       | |   | | | |   | | |   |   | | | | | | |   | 
 |   |     |   | +---+ +-----|-----|-------|-------------|-----|-|-----------------|-----------|-----------|-|---|---------+ |     |   |     | | | |       | +---|-|---|---|-------+   | | | | | | |   | 
 |   |     |   |   |   | | | | | | | | |   | | |         |   | | | |   | |   |     |     | |   |   | | |   | |   |     |   | |     |   |     | | | |       |     | | | |   | | |       | | | | | | |   | 
 |   |     |   |   |   | | | | | | | | |   | | |         |   | | | |   | |   | +-----------|---|---|-|-----|-|---------|-----------|---|-------|-|---------|---------|-|---------------+ | +-|-+ | |   | 
 |   |     |   |   |   | | | | | | | | |   | | |         |   | | | |   | |   | |   |     | |   |   | | |   | |   |     |   | |     |   |     | | | |       |     | | | |   | | |         |   |   | |   | 
 | +-|-------------|---|-|---|-|---|-|-|---|-|-|-----------------|-----|-----------|-----|-----------------|-----------|-----|---------------|-|-|---------|-----|-|-|-------|-|-------+ |   |   | |   | 
 | | |     |   |   |   | | | | | | | | |   | | |         |   | | | |   | |   | |   |     | |   |   | | |   | |   |     |   | |     |   |     | | | |       |     | | | |   | | |       | |   |   | |   | 
 | | +-----|-----------|-------|---|-|---------|---------|-----|-|-------|-----------------|---|---|---------+   |     |   | |     |   |     | | | |       |     | | | |   | | |       | |   |   | |   | 
 | |       |   |   |   | | | | | | | | |   | | |         |   | | | |   | |   | |   |     | |   |   | | |   |     |     |   | |     |   |     | | | |       |     | | | |   | | |       | |   |   | |   | 
 | |       |   +---|---|-----|-+ | | | |   | | +-----------------------|-----|-------------------------|---------------|---------------|-----|-|-+ |       |     | | | |   | | |       | |   |   | |   | 
 | |       |       |   | | | |   | | | |   | |           |   | | | |   | |   | |   |     | |   |   | | |   |     |     |   | |     |   |     | |   |       |     | | | |   | | |       | |   |   | |   | 
 | |       |       |   +-|-|-|---|-|---------|-----------|-------|-----|-----|---------------+ |   | | |   |     +-----------|-----|---|---+ | |   +---------+   | | | |   | | |       | |   |   | |   | 
 | |       |       |     | | |   | | | |   | |           |   | | | |   | |   | |   |     | | | |   | | |   |           |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |     | | |   | | | |   | |           |   | | | |   | | +-|-|---|-----------|-----------+           |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |     | | |   | | | |   | |           |   | | | |   | | | | |   |     | | | |   | | |               |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |     | | |   | | | |   | |           |   | | | |   | | | | |   |     | | | |   | | |               |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |     | | |   | | | |   | |           |   | | | |   | | | | |   |     | | | |   | | |               |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |     | | |   | | | |   | |           |   | | | |   | | | | |   |     | | | |   | | |               |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |     | | |   | | | |   | |           |   | | | |   | | | | |   |     | | | |   | | |               |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |   +---------+ | | |   | | +---------|-------+ |   | | | | |   |     | | | |   | | |               |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |   | | | |     | | |   | | |         |   | |   |   | | | | |   |     | | | |   | | |               |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |   | | | | +---|---|---|-----------------|-|-------|-------|---|-----------|---|---+               |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |   | | | | |   | | |   | | |         |   | |   |   | | | | |   |     | | | |   | |                 |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |   | | | | |   | | |   | | |         |   | |   |   | | | | |   |     | | | |   | |                 |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |   | | | | |   | | |   | | |         |   | |   |   | | | | |   |     | | | |   | |                 |   | |     |   |   | | |           | |   | | | |   | | |       | |   |   | |   | 
 | |       |       |   | | | | |   | | |   | | |         |   | |   | +---|-----|---------|-|-|-|---|-------------------|-----------|-------|-----------------|-----|---------|-+       | |   |   | |   | 
 | |       |       |   | | | | |   | | |   | | |         |   | |   | | | | | | |   |     | | | |   | |                 |   | |     |   |   | | |           | |   | | | |   | |         | |   |   | |   | 
 | +-+     |       |   +-|---------|---|-----|-|---------|---|-|-----------|-|-|---------|-+ | |   | |                 |   | |     +---|-----+ |           | |   | | | | +-|---+       | |   |   | |   | 
 |   |     |       |     | | | |   | | |   | | |         |   | |   | | | | | | |   |     |   | |   | |                 |   | |         |   |   |           | |   | | | | | | | |       | |   |   | |   | 
 |   |     |       |     | | | |   | | |   | | |         |   | |   | | | | | | |   |     |   | |   | |                 |   | |         +---|-----------------|-----------|-|---|-------|-----|-----|---+ 
 |   |     |       |     | | | |   | | |   | | |         |   | |   | | | | | | |   |     |   | |   | |                 |   | |             |   |           | |   | | | | | | | |       | |   |   | |     
 | +-----+ |       |     | +---------------------+       |   | |   +---|---|-|-----------|---|-|---|-|-----------------------|-------------|---------------|---------|-|-|-|---+       | |   |   | |     
 | | |   | |       |     |   | |   | | |   | | | |       |   | |     | | | | | |   |     |   | |   | |                 |   | |             |   |           | |   | | | | | | |         | |   |   | |     
 | | |   | |       |     |   | |   | | |   | | | |       |   | |     | | | | | |   |     |   | |   | |                 |   | |             |   |           | |   | | | | | | |         | |   |   | |     
 | | |   | |       |     |   | |   | | |   | | | |       |   | |     | | | | | |   |     |   | |   | |                 |   | |             |   |           | |   | | | | | | |         | |   |   | |     
 | | |   | |       |     |   | |   | | |   | | | |       |   +-------------|-|-|---|---------|-|-----|-----------+     |   | |             |   |           | |   | | | | | | |         | |   |   | |     
 | | |   | |       |     |   | |   | | |   | | | |       |     |     | | | | | |   |     |   | |   | |           |     |   | |             |   |           | |   | | | | | | |         | |   |   | |     
 | +-------|-------|-----|---|-----|-|-----|-+ | |       | +---|---+ | | | | +-|---------|---|---+ | |           |     |   | |             |   |           | |   | | | | | | |         | |   |   | |     
 |   |   | |       |     |   | |   | | |   |   | |       | |   |   | | | | |   |   |     |   | | | | |           |     |   | |             |   |           | |   | | | | | | |         | |   |   | |     
 |   |   | |       |     |   | |   | | |   |   | |       | |   |   | | | | |   |   |     |   | | | | |           |     |   | |             |   |           | |   | | | | | | |         | |   |   | |     
 |   |   | |       |     |   | |   | | |   |   | |       | |   |   | | | | |   |   |     |   | | | | |           |     |   | |             |   |           | |   | | | | | | |         | |   |   | |     
 |   |   | |       |     |   | |   | | |   |   | |       | |   |   | | | | |   |   |     |   | | | | |           |     |   | |             |   |           | |   | | | | | | |         | |   |   | |     
 |   |   | |       |     |   | |   | | |   |   | |       | |   |   | | | | |   |   |     |   | | | | |           |     |   | |             |   |           | |   | | | | | | |         | |   |   | |     
 |   |   | |       |     |   | +---|---|---|---|-|-------------|---------|-----|---|-----|---|-----|-|-----------|---------|-------+       |   |           | |   | | | | | | |         | |   |   | |     
 |   |   | |       |     |   |     | | |   |   | |       | |   |   | | | | |   |   |     |   | | | | |           |     |   | |     |       |   |           | |   | | | | | | |         | |   |   | |     
 |   |   +-------+ |     |   |     | | |   |   | +-------|-|---|---|---|---|---|---------|-----|-|---|-------------+   |   | +-----|-------|---|-+   +-----|-------|-----+ | |         | |   |   | |     
 |   |     |     | |     |   |     | | |   |   |         | |   |   | | | | |   |   |     |   | | | | |           | |   |   |       |       |   | |   |     | |   | | | |   | |         | |   |   | |     
 |   |     |     | |     |   |     | | |   |   |         | |   |   | | | | |   |   |     |   | | | | |           | |   |   | +-----+       |   | +---|-+   | |   | +-|-|---------------|-+   |   | |     
 |   |     |     | |     |   |     | | |   |   |         | |   |   | | | | |   |   |     |   | | | | |           | |   |   | |             |   |     | |   | |   |   | |   | |         |     |   | |     
 |   |     |     | |     |   |     | | |   |   |         | |   |   | | | | |   |   |     |   | | | | |           | |   |   | |             |   |     +-|---|-|---|---|-------|-----+   |     |   | |     
 |   |     |     | |     |   |     | | |   |   |         | |   |   | | | | |   |   |     |   | | | | |           | |   |   | |             |   |       |   | |   |   | |   | |     |   |     |   | |     
 |   |     |   +-|-|---------|-------|-------------------------------------|---|-----------------------------------|---|---|-|-------------------------|---|---------|-----|-|-----|---|---------|-|---+ 
 |   |     |   | | |     |   |     | | |   |   |         | |   |   | | | | |   |   |     |   | | | | |           | |   |   | |             |   |       |   | |   |   | |   | |     |   |     |   | |   | 
 |   |     |   | | |     +---------|---|-------------------|---------------|---|---------|-----|-------------------|-------|---------------------------|-----|---|---|-|---------+ |   |     |   | |   | 
 |   |     |   | | |         |     | | |   |   |         | |   |   | | | | |   |   |     |   | | | | |           | |   |   | |             |   |       |   | |   |   | |   | |   | |   |     |   | |   | 
 |   |     |   | | |         |     | | |   |   |         | | +-----------------|---|-----|---|-----|-|-----------|-----|-----+             |   |       |   | |   |   | |   | |   | |   |     |   | |   | 
 |   |     |   | | |         |     | | |   |   |         | | | |   | | | | |   |   |     |   | | | | |           | |   |   |               |   |       |   | |   |   | |   | |   | |   |     |   | |   | 
 |   |     |   | +-|-----+   |     | | |   |   |         | | | |   | | | | |   |   |   +-----|-|-----|-------------|---|-----------------------------------|-|-+ |   | |   | |   | |   |     |   | |   | 
 |   |     |   |   |     |   |     | | |   |   |         | | | |   | | | | |   |   |   | |   | | | | |           | |   |   |               |   |       |   | | | |   | |   | |   | |   |     |   | |   | 
 |   |     |   | +-|-----+   |     +-------|---|-----------|-|---------|---|---+   |   | |   | | | | |           | |   |   |               |   |       |   | | +-|-----|---|-|-------+ |     |   | |   | 
 |   |     |   | | |         |       | |   |   |         | | | |   | | | | |       |   | |   | | | | |           | |   |   |               |   |       |   | |   |   | |   | |   | | | |     |   | |   | 
 +---|---------|---|-----------------|-----|---|---------|-|-|-----|---|-----------------|---+ | | | |           | |   |   |               |   |       |   | |   |   | |   | |   | | | |     |   | |   | 
     |     |   | | |         |       | |   |   |         | | | |   | | | | |       |   | |     | | | |           | |   |   |               |   |       |   | |   |   | |   | |   | | | |     |   | |   | 
     |     |   | | |         |       | |   |   |         | | | |   | | | | |       |   | |     | | | |           | |   |   |               |   |       |   | |   |   | |   | |   | +-|-|-----|---|---+ | 
     |     X   | | |         |       | |   |   |         | | | |   | | | | |       |   | |     | | | |           | |   |   |               |   |       |   | |   |   | |   | |   |   | |     |   | | | | 
     |     |   | | |         |       | |   |   |         | | | +-----|-|---|-------+   | |     | | | |           | |   |   |               |   |   +---+   | |   |   | |   | |   |   | |     |   | | | | 
     |     |   | | |         |       | |   |   |         | | |     | | | | |           | |     | | | |           | |   |   |               |   |   |       | |   |   | |   | |   |   | |     |   | | | | 
     |     |   | +-|-----------------|-------------------|-|-------|---|A|-|---+       | |     | +---|-----------|-|---|---|---------------|---|---|-------|-|-+ |   | |   | |   |   | |     |   | | +-+ 
     |     |   |   |         |       | |   |   |         | | |     | | | | |   |       | |     |   | |           | |   |   |               |   |   |       | | | |   | |   | |   |   | |     |   | |     
     |     |   | +---------------------|---------------------|-------|-|---+   |       | |     |   | |           | |   |   |               +---------------|-+ | +---|-|---|-----|-----|-----|-----|-+   
     |     |   | | |         |       | |   |   |         | | |     | | | |     |       | |     |   | |           | |   |   |                   |   |       |   |     | |   | |   |   | |     |   | | |   
     |     |   | | |         | +-----|-----|-----------------------------|---------------|-----|-----|-------------|---|-----------------------|---|-------|---|---+ | +---+ +---|---|-|---+ |   | | |   
     |     |   | | |         | |     | |   |   |         | | |     | | | |     |       | |     |   | |           | |   |   |                   |   |       |   |   | |           |   | |   | |   | | |   
     |     |   | | |         | +-----------|-------------|-+ +-+   +-|-|-------+       | |     |   | |           | |   |   |                   |   |       |   |   | |       +---|-----|-+ | |   | | |   
     |     |   | | |         |       | |   |   |         |     |     | | |             | |     |   | |           | |   |   |                   |   |       |   |   | |       |   |   | | | | |   | | |   
     |     |   | +-|---------|-------|-------------------------------|-|-----------------------|-----|-----------|-|---|---|-----------------------|-------|-------|-----+   +-----+ | | | | |   | | |   
     |     |   |   |         |       | |   |   |         |     |     | | |             | |     |   | |           | |   |   |                   |   |       |   |   | |   |       | | | | | | |   | | |   
     |     |   |   |         | +-----|-|-------|---------|-----|---------|---------------|-----+   | |           | |   |   |                   |   |   +---|-+ |   | |   |       | | | | +-------|-+ |   
     |     |   |   |         | |     | |   |   |         |     |     | | |             | |         | |           | |   |   |                   |   |   |   | | |   | |   |       | | | |   | |   |   |   
     |     |   |   |         | | +---------|---|---------------------|---|-------------------------+ |           | |   |   | +-----------------|---|---|---|-+ | +-|---+ |   +-+ | | | |   | |   |   |   
     |     |   |   |         | | |   | |   |   |         |     |     | | |             | |           |           | |   |   | |                 |   |   |   |   | | | | | |   | | | | | |   | |   |   |   
     |     |   |   |         | | |   | |   |   |         |     |     | | |             +-|-----------|-----------------|---------------------------|---|---|-+ +---|-|-|-+   +---+ | +-------|---|---|-+ 
     |     |   |   |         | | |   | |   |   |         |     |     | | |               |           |           | |   |   | |                 |   |   |   | |   | | | |       |   |   |   | |   |   | | 
     |     |   |   |         | | +-+ +-----|---|---------------|---------|---------------|-----+     +-----------+ +-------|-----------------------|---+   | |   | | | +---+   |   |   | +---|---+   | | 
     |     |   |   W         | |   |   |   |   |         |     |     | | |               |     |                       |   | |                 |   |       | |   | | |     |   |   |   | | | |       | | 
   +-------|---|---|---------|-|-----------|-------------------|-------|-----------------|-----|-----------------------|---|-|-----------------|-------------|---|---|-------------|---+ | | |       | | 
   | |     |   |   |         | |   |   |   |   |         |     |     | | |               |     |                       |   | |                 |   |       | |   | | |     |   |   |     | | |       | | 
   | |     +-----------------|-|---|-------|-------------+     |     | | |               |     |                       |   | |           +-----|-----------------|-|------R|---|---+     | | |       | | 
   | |         |   |         | |   |   |   |   |               |     | | |               |     |                       |   | |           |     |   |       | |   | | |     |   |         | | |       | | 
   | +-------------|---------+ |   |   |   +---|---------------|-------|-+               +-----------------------------|-----+           |     |   +-+     | |   | | |     +---+         | +-|-+     | | 
   |           |   |           |   |   |       |               |     | |                       |                       |   |             |     |     |     | |   | | |                   |   | |     | | 
 +-+           +-----------------------------------------------|-----|-----------------+       |                       |   +-+           |     |     |     +-+   | | | +-----------------|-------------+ 
 |                 |           |   |   |       |               |     | |               |       |                       |     |           |     |     |           | | | |                 |   | |     |   
 +-----------------------------|-------|-------|---------------------------------------|-------|-----------------------|-----|-----------|-----|-----------------|-----|---------------+ |   | |     |   
                   |           |   |   |       |               |     | |               |       |                       |     |           |     |     |           | | | |               | |   | |     |   
                   |           +---|-----------|-----------------------|---------------|-------|-----------------------|-----------------------------|-------------|-|-|---------------|-+   | |     |   
                   |               |   |       |               |     | |               |       |                       |     |           |     |     |           | | | |               |     | |     |   
                   |               |   |       |               +-----|-|---------------+       |                       +-----------------------------|-----------|-|-|-----------------|-------------+   
                   |               |   |       |                     | |                       |                             |           |     |     |           | | | |               |     | |         
                   |               |   |       +---------------------+ +-----------------------|-----------------------------|-----------------|---------------------|-----------------|-------+         
                   |               |   |                                                       |                             |           |     |     |           | | | |               |     |           
                   +---------------+   +-------------------------------------------------------+                             +-----------+     +-----+           +-+ +-+               +-----+           
                                                                                                                                                                                                         """

if __name__ == '__main__':

    if sys.argv[1] == "2":
        result = compute2(puzzle_input)
    else:
        result = compute(puzzle_input)

    print("Result is {}".format(result))
